{"ast":null,"code":"import{Contracts_MetaMask}from\"../../contract/contracts\";import Form from\"react-bootstrap/Form\";import{useState,useEffect}from\"react\";import MDEditor from\"@uiw/react-md-editor\";import Button from\"react-bootstrap/Button\";import Wait_Modal from\"../../contract/wait_Modal\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Show_correct(props){if(props.cont==true){return/*#__PURE__*/_jsxs(\"a\",{children:[\"\\u7B54\\u3048\\u306F\",props.answer]});}else{return/*#__PURE__*/_jsx(_Fragment,{});}}function Answer_type1(props){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"a\",{children:[/*#__PURE__*/_jsx(\"br\",{}),\"\\u9078\\u629E\\u5F0F\"]}),/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:props.quiz.answer_data.split(\",\").map(cont=>{let check_box=/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",value:cont,onChange:()=>props.setAnswer(cont),checked:props.answer===cont});return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:check_box}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"left\",children:cont})]},cont);})})})]});}function Answer_type2(props){const[error_collect,SetError_Collect]=useState(true);const handle_Test_pattern=event=>{const value=event.target.value;const pattern=new RegExp(props.quiz.answer_data.split(\",\")[0]);if(!pattern.test(value)){SetError_Collect(true);}else{SetError_Collect(false);}props.setAnswer(value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{children:\"\\u5165\\u529B\\u5F62\\u5F0F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",onChange:handle_Test_pattern}),error_collect?\"エラー\":\"OK\"]})})]});}function Answer_quiz(){const[quizSet,setQuizSet]=useState([]);const[answers,setAnswers]=useState({});const[show,setShow]=useState(false);const[is_correct_show,setIs_correct_show]=useState(false);const Contract=new Contracts_MetaMask();useEffect(()=>{// クイズセットのデータを取得する\nconst fetchQuizSet=async()=>{const quizSetData=await Contract.get_quiz_set();// クイズセットのデータを取得する関数\nsetQuizSet(quizSetData);};fetchQuizSet();},[]);const handleAnswerChange=(quizId,answer)=>{setAnswers(prevAnswers=>({...prevAnswers,[quizId]:answer}));};const submitAnswers=async()=>{setShow(true);try{await Contract.bulkSubmitAnswers(answers);alert(\"解答を一括送信しました！\");}catch(error){alert(\"送信に失敗しました。\");}setShow(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[quizSet.map(quiz=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:quiz.title}),/*#__PURE__*/_jsx(MDEditor.Markdown,{source:quiz.content}),quiz.answer_type===0?/*#__PURE__*/_jsx(Answer_type1,{quiz:quiz,answer:answers[quiz.id],setAnswer:answer=>handleAnswerChange(quiz.id,answer)}):/*#__PURE__*/_jsx(Answer_type2,{quiz:quiz,answer:answers[quiz.id],setAnswer:answer=>handleAnswerChange(quiz.id,answer)})]},quiz.id)),/*#__PURE__*/_jsx(Button,{onClick:submitAnswers,children:\"\\u89E3\\u7B54\\u3092\\u4E00\\u62EC\\u9001\\u4FE1\"}),/*#__PURE__*/_jsx(Wait_Modal,{showFlag:show})]});}export default Answer_quiz;","map":{"version":3,"names":["Contracts_MetaMask","Form","useState","useEffect","MDEditor","Button","Wait_Modal","jsxs","_jsxs","Fragment","_Fragment","jsx","_jsx","Show_correct","props","cont","children","answer","Answer_type1","className","quiz","answer_data","split","map","check_box","type","value","onChange","setAnswer","checked","scope","Answer_type2","error_collect","SetError_Collect","handle_Test_pattern","event","target","pattern","RegExp","test","Answer_quiz","quizSet","setQuizSet","answers","setAnswers","show","setShow","is_correct_show","setIs_correct_show","Contract","fetchQuizSet","quizSetData","get_quiz_set","handleAnswerChange","quizId","prevAnswers","submitAnswers","bulkSubmitAnswers","alert","error","title","Markdown","source","content","answer_type","id","onClick","showFlag"],"sources":["/Users/toji.inoue/Desktop/卒業研究_井上登司フォルダ/web3-sotuken/src/pages/answer_quiz/answer_quiz.jsx"],"sourcesContent":["import { Contracts_MetaMask } from \"../../contract/contracts\";\nimport Form from \"react-bootstrap/Form\";\nimport { useState, useEffect } from \"react\";\nimport MDEditor from \"@uiw/react-md-editor\";\nimport Button from \"react-bootstrap/Button\";\nimport Wait_Modal from \"../../contract/wait_Modal\";\n\nfunction Show_correct(props){\n    if(props.cont == true){\n        return (\n            <a>答えは{props.answer}</a>\n        );\n    } else {\n        return <></>;\n    }\n}\n\nfunction Answer_type1(props) {\n    return (\n        <>\n            <a><br />選択式</a>\n            <table className=\"table\">\n                <tbody>\n                    {props.quiz.answer_data.split(\",\").map((cont) => {\n                        let check_box = (\n                            <input\n                                className=\"form-check-input\"\n                                type=\"checkbox\"\n                                value={cont}\n                                onChange={() => props.setAnswer(cont)}\n                                checked={props.answer === cont}\n                            />\n                        );\n                        return (\n                            <tr key={cont}>\n                                <th scope=\"col\">{check_box}</th>\n                                <th scope=\"col\" className=\"left\">{cont}</th>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        </>\n    );\n}\n\nfunction Answer_type2(props) {\n    const [error_collect, SetError_Collect] = useState(true);\n\n    const handle_Test_pattern = (event) => {\n        const value = event.target.value;\n        const pattern = new RegExp(props.quiz.answer_data.split(\",\")[0]);\n\n        if (!pattern.test(value)) {\n            SetError_Collect(true);\n        } else {\n            SetError_Collect(false);\n        }\n\n        props.setAnswer(value);\n    };\n\n    return (\n        <>\n            <a>入力形式</a>\n            <div className=\"row\">\n                <div className=\"col-10\">\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        onChange={handle_Test_pattern}\n                    />\n                    {error_collect ? \"エラー\" : \"OK\"}\n                </div>\n            </div>\n        </>\n    );\n}\n\nfunction Answer_quiz() {\n    const [quizSet, setQuizSet] = useState([]);\n    const [answers, setAnswers] = useState({});\n    const [show, setShow] = useState(false);\n    const [is_correct_show, setIs_correct_show] = useState(false);\n\n    const Contract = new Contracts_MetaMask();\n\n    useEffect(() => {\n        // クイズセットのデータを取得する\n        const fetchQuizSet = async () => {\n            const quizSetData = await Contract.get_quiz_set(); // クイズセットのデータを取得する関数\n            setQuizSet(quizSetData);\n        };\n\n        fetchQuizSet();\n    }, []);\n\n    const handleAnswerChange = (quizId, answer) => {\n        setAnswers(prevAnswers => ({\n            ...prevAnswers,\n            [quizId]: answer\n        }));\n    };\n\n    const submitAnswers = async () => {\n        setShow(true);\n        try {\n            await Contract.bulkSubmitAnswers(answers);\n            alert(\"解答を一括送信しました！\");\n        } catch (error) {\n            alert(\"送信に失敗しました。\");\n        }\n        setShow(false);\n    };\n\n    return (\n        <>\n            {quizSet.map(quiz => (\n                <div key={quiz.id}>\n                    <h2>{quiz.title}</h2>\n                    <MDEditor.Markdown source={quiz.content} />\n                    {quiz.answer_type === 0 ? (\n                        <Answer_type1\n                            quiz={quiz}\n                            answer={answers[quiz.id]}\n                            setAnswer={(answer) => handleAnswerChange(quiz.id, answer)}\n                        />\n                    ) : (\n                        <Answer_type2\n                            quiz={quiz}\n                            answer={answers[quiz.id]}\n                            setAnswer={(answer) => handleAnswerChange(quiz.id, answer)}\n                        />\n                    )}\n                </div>\n            ))}\n            <Button onClick={submitAnswers}>解答を一括送信</Button>\n            <Wait_Modal showFlag={show} />\n        </>\n    );\n}\n\nexport default Answer_quiz;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}